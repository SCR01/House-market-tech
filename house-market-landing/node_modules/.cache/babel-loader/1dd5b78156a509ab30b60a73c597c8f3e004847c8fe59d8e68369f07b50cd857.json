{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useInView}from'react-intersection-observer';import useDebounce from'../../utils/useDebounce';import Trie from'../../utils/Trie';import'./UserSearch.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserSearch=()=>{const[searchTerm,setSearchTerm]=useState('');const[users,setUsers]=useState([]);const[filteredUsers,setFilteredUsers]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const debouncedSearchTerm=useDebounce(searchTerm,300);// Debounce search input by 300ms\nconst trieRef=useRef(null);const[ref,inView]=useInView({triggerOnce:true,threshold:0.1});// Fetch users from API\nuseEffect(()=>{const fetchUsers=async()=>{setLoading(true);try{const response=await fetch('https://jsonplaceholder.typicode.com/users');if(!response.ok){throw new Error('Failed to fetch users');}const data=await response.json();setUsers(data);setFilteredUsers(data);// Initialize Trie for efficient search\nconst trie=new Trie();data.forEach(user=>{trie.insert(user.name,user);trie.insert(user.username,user);trie.insert(user.email,user);});trieRef.current=trie;}catch(err){setError(err.message);console.error('Error fetching users:',err);}finally{setLoading(false);}};fetchUsers();},[]);// Handle search with debounced input using Trie\nuseEffect(()=>{if(debouncedSearchTerm&&trieRef.current){const results=trieRef.current.searchPrefix(debouncedSearchTerm);// Remove duplicates (since a user might match on multiple fields)\nconst uniqueResults=Array.from(new Map(results.map(user=>[user.id,user])).values());setFilteredUsers(uniqueResults);}else{setFilteredUsers(users);}},[debouncedSearchTerm,users]);return/*#__PURE__*/_jsx(\"section\",{id:\"users\",className:\"user-search-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Our Community Members\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Search and connect with our community of homeowners and property experts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search users by name, username, or email...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"Loading users...\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[\"Error: \",error]}),!loading&&!error&&/*#__PURE__*/_jsx(\"div\",{ref:ref,className:`users-grid ${inView?'fade-in':''}`,children:filteredUsers.length>0?filteredUsers.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:\"user-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:`https://ui-avatars.com/api/?name=${user.name}&background=random&color=fff`,alt:user.name,loading:\"lazy\"// Implement lazy loading for images\n})}),/*#__PURE__*/_jsx(\"h3\",{className:\"user-name\",children:user.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"user-username\",children:[\"@\",user.username]}),/*#__PURE__*/_jsx(\"p\",{className:\"user-email\",children:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",user.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Website:\"}),\" \",user.website]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Company:\"}),\" \",user.company.name]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"user-contact-btn\",children:\"Contact\"})]},user.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"no-results\",children:[\"No users found matching \\\"\",searchTerm,\"\\\"\"]})})]})});};export default UserSearch;","map":{"version":3,"names":["React","useState","useEffect","useRef","useInView","useDebounce","Trie","jsx","_jsx","jsxs","_jsxs","UserSearch","searchTerm","setSearchTerm","users","setUsers","filteredUsers","setFilteredUsers","loading","setLoading","error","setError","debouncedSearchTerm","trieRef","ref","inView","triggerOnce","threshold","fetchUsers","response","fetch","ok","Error","data","json","trie","forEach","user","insert","name","username","email","current","err","message","console","results","searchPrefix","uniqueResults","Array","from","Map","map","id","values","className","children","type","placeholder","value","onChange","e","target","length","src","alt","phone","website","company"],"sources":["C:/Users/scr/OneDrive/Desktop/House market tech/house-market-landing/src/components/UserSearch/UserSearch.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useInView } from 'react-intersection-observer';\nimport useDebounce from '../../utils/useDebounce';\nimport Trie from '../../utils/Trie';\nimport './UserSearch.css';\n\nconst UserSearch = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const debouncedSearchTerm = useDebounce(searchTerm, 300); // Debounce search input by 300ms\n  const trieRef = useRef(null);\n\n  const [ref, inView] = useInView({\n    triggerOnce: true,\n    threshold: 0.1,\n  });\n\n  // Fetch users from API\n  useEffect(() => {\n    const fetchUsers = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch('https://jsonplaceholder.typicode.com/users');\n        if (!response.ok) {\n          throw new Error('Failed to fetch users');\n        }\n        const data = await response.json();\n        setUsers(data);\n        setFilteredUsers(data);\n        \n        // Initialize Trie for efficient search\n        const trie = new Trie();\n        data.forEach(user => {\n          trie.insert(user.name, user);\n          trie.insert(user.username, user);\n          trie.insert(user.email, user);\n        });\n        trieRef.current = trie;\n        \n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching users:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUsers();\n  }, []);\n\n  // Handle search with debounced input using Trie\n  useEffect(() => {\n    if (debouncedSearchTerm && trieRef.current) {\n      const results = trieRef.current.searchPrefix(debouncedSearchTerm);\n      \n      // Remove duplicates (since a user might match on multiple fields)\n      const uniqueResults = Array.from(\n        new Map(results.map(user => [user.id, user])).values()\n      );\n      \n      setFilteredUsers(uniqueResults);\n    } else {\n      setFilteredUsers(users);\n    }\n  }, [debouncedSearchTerm, users]);\n\n  return (\n    <section id=\"users\" className=\"user-search-section\">\n      <div className=\"container\">\n        <div className=\"section-header\">\n          <h2>Our Community Members</h2>\n          <p>Search and connect with our community of homeowners and property experts</p>\n        </div>\n\n        <div className=\"search-container\">\n          <input\n            type=\"text\"\n            placeholder=\"Search users by name, username, or email...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"search-input\"\n          />\n          <div className=\"search-icon\">üîç</div>\n        </div>\n\n        {loading && <div className=\"loading-message\">Loading users...</div>}\n        {error && <div className=\"error-message\">Error: {error}</div>}\n\n        {!loading && !error && (\n          <div ref={ref} className={`users-grid ${inView ? 'fade-in' : ''}`}>\n            {filteredUsers.length > 0 ? (\n              filteredUsers.map(user => (\n                <div key={user.id} className=\"user-card\">\n                  <div className=\"user-avatar\">\n                    <img \n                      src={`https://ui-avatars.com/api/?name=${user.name}&background=random&color=fff`}\n                      alt={user.name}\n                      loading=\"lazy\" // Implement lazy loading for images\n                    />\n                  </div>\n                  <h3 className=\"user-name\">{user.name}</h3>\n                  <p className=\"user-username\">@{user.username}</p>\n                  <p className=\"user-email\">{user.email}</p>\n                  <div className=\"user-details\">\n                    <p><strong>Phone:</strong> {user.phone}</p>\n                    <p><strong>Website:</strong> {user.website}</p>\n                    <p><strong>Company:</strong> {user.company.name}</p>\n                  </div>\n                  <button className=\"user-contact-btn\">Contact</button>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No users found matching \"{searchTerm}\"</div>\n            )}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default UserSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}